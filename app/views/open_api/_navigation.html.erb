<div id="Vlt-sidenav" class="Vlt-sidenav Vlt-sidenav--light js-scrollspy">
  <div class="Vlt-sidenav__scroll">
    <ul class="Vlt-sidemenu">
      <li><h5 class="Vlt-sidemenu__title"><%= @definition.info['title'] %></h5></li>
          <li>
            <a class="Vlt-sidemenu__link" href="#overview">Overview</a>
          </li>

          <% @groups.each do |name, endpoints| %>
            <% if name %>
              <% group = @definition.raw['x-groups'][name] %>
              <li>
                <p class="Vlt-sidemenu__trigger"><%= group['name'] %></p>
                <ul>
            <% end %>

            <li>
              <ul>
                <% endpoints.each do |endpoint| %>
                  <li>
                    <%= link_to "##{endpoint.operationId}" do %>
                      <span class="label label--code label--<%= endpoint.method %>"><%= endpoint.method.upcase %></span>
                      <%= endpoint.summary %>
                    <% end %>
                    <% if endpoint.callbacks.any? %>
                      <ul>
                        <% endpoint.callbacks.each do |callback| %>
                          <% callback.paths.each do |path| %>
                            <% path.endpoints.each do |endpoint| %>
                              <li>
                                <%= link_to "##{endpoint.operationId}" do %>
                                <span class="label label--code label--callback">
                                  <i class="icon icon-callback"></i>
                                </span>
                                <%= endpoint.summary %>
                                <% end %>
                              </li>
                            <% end %>
                          <% end %>
                        <% end %>
                      </ul>
                    <% end %>
                  </li>
                <% end %>
              </ul>
            </li>

            <% if @definition.raw['x-webhooks'] %>
              <% @definition.raw['x-webhooks'].each do |name, definition| %>
                <% callback = OasParser::Callback.new(self, name, definition) %>

                <% callback.paths.each do |path| %>
                  <% path.endpoints.each do |endpoint| %>
                    <li>
                      <%= link_to "##{name}" do %>
                        <span class="label label--code label--webhook">
                          <i class="icon icon-webhook"></i>
                        </span>
                        <%= endpoint.summary %>
                      </li>
                    <% end %>
                  <% end %>
                <% end %>
              <% end %>
            <% end %>

            <% if name %>
                </li>
              </ul>
            <% end %>
          <% end %>

          <% if @definition_errors_content %>
            <li>
              <a class="Vlt-sidemenu__link" href="#errors">Errors</a>
            </li>
          <% end %>
      </li>
    </ul>
  </div>
</div>
